STATUS=@STATUS@
THEME=@THEME@
NAME=@NAME@
VERSION=@VERSION@

all:
	cp -a  /usr/src/design-bootloader-source ./
	cp -a bootloader/config design-bootloader-source/
	cp -a bootloader/gfxboot.cfg design-bootloader-source/data-install/
	cp -a bootloader/gfxboot.cfg design-bootloader-source/data-boot/
	for size in 1024x768 800x600 640x480; do \
		convert images/boot.jpg -resize "$$size!" -fill '#c62530' -font /usr/share/fonts/ttf/dejavu/DejaVuSansCondensed-Bold.ttf -style Normal -weight Normal -pointsize 20 -gravity northeast -draw 'text 25,25 "@STATUS@"' boot-$$size.jpg ;\
		cp -al boot-$$size.jpg bootsplash/images/silent-$$size.jpg ;\
	done
	cp -al boot-800x600.jpg design-bootloader-source/data-boot/back.jpg
	cp -al boot-800x600.jpg design-bootloader-source/data-install/back.jpg
# background
	convert images/background.png -fill '#c62530' -font /usr/share/fonts/ttf/dejavu/DejaVuSansCondensed-Bold.ttf -style Normal -weight Normal -pointsize 20 -gravity northeast -draw 'text 25,25 "@STATUS@"' background.png
	cp -al background.png graphics/backgrounds/default.png
	cp -al background.png graphics/backgrounds/xdm.png
	convert background.png kde3-styles-splash/Background.jpg
	cp -al background.png kde3-styles-splash/Background.png
	convert -resize '400x320!' images/background.png kde3-styles-splash/Preview.png
# console background
	cp -al images/console.jpg bootsplash/images/bootsplash-800x600.jpg
	convert -resize '640x480!' bootsplash/images/bootsplash-800x600.jpg bootsplash/images/bootsplash-640x480.jpg
#color scheme
	mv kde3-settings/apps/kdisplay/color-schemes/scheme.kcsrc "kde3-settings/apps/kdisplay/color-schemes/@BRAND_FNAME@ @NAME@.kcsrc"

include components.mk
install: browser-qt ahttpd
